{"version":3,"sources":["webpack:///./src/views/Meeting.vue?1311","webpack:///./src/views/Meeting.vue?ade6","webpack:///src/views/Meeting.vue","webpack:///./src/views/Meeting.vue?8f24","webpack:///./src/views/Meeting.vue?efce"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","on","loadMeeting","closeWindow","staticRenderFns","data","idMeet","leaveUrl","apiKey","signature","meetingNumber","passWord","userName","userEmail","registrantToken","userId","isHost","isMuted","isVideo","computed","created","params","length","console","log","institucion","ZoomMtg","setZoomJSLib","preLoadWasm","prepareWebSDK","i18n","load","reload","alert","window","close","mounted","inMeetingServiceListener","methods","loadControls","mic","cam","isLeave","clearInterval","intervalo","open","route","href","startMeeting","document","getElementById","style","display","init","meetingInfo","success","btnCancel","setAttribute","textContent","addEventListener","btnJoin","parentNode","appendChild","meetTitle","configStorageZoom","error","getCurrentUser","localStorage","setItem","cleanStorage","removeItem","endMeeting","res","leaveMeeting","micOnMeeting","param","mute","err","camOnMeeting","getElementsByClassName","click","component"],"mappings":"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","file":"js/chunk-1c9f2fc8.c0d2fbe0.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meeting.vue?vue&type=style&index=0&id=0c5066f4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"menuMeet\"}},[_c('h1',[_vm._v(\"Meeting\")]),_c('div',{attrs:{\"id\":\"btnGroup\"}},[_c('button',{staticClass:\"btn btn-info\",on:{\"click\":_vm.loadMeeting}},[_vm._v(\"Ingresar\")]),_c('button',{staticClass:\"btn btn-info\",attrs:{\"id\":\"closeWindow\"},on:{\"click\":_vm.closeWindow}},[_vm._v(\"Cerrar\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"menuMeet\">\r\n    <h1>Meeting</h1>\r\n    <div id=\"btnGroup\">\r\n      <button class=\"btn btn-info\" @click=\"loadMeeting\">Ingresar</button>\r\n      <button id=\"closeWindow\" class=\"btn btn-info\" @click=\"closeWindow\">Cerrar</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst { remote } = window.require(\"electron\")\r\nimport functionsFirebase from \"../functionsFB\"\r\nimport { mapGetters } from \"vuex\"\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      idMeet: \"0wFYekXnq0dbG7jyJ70O\",\r\n      leaveUrl: \"/close\",\r\n      apiKey: \"7HoWJb-aTgipYLXX-uzn1w\",\r\n      signature: \"N0hvV0piLWFUZ2lwWUxYWC11em4xdy43NzA5NjE1OTAwNy4xNjM3NjE4MzM4ODIxLjEuTkZadVlyOW5xZDdNVnRGZ3UwbTJEanluUkZJM2lDaTBTdXJpYlFVWGhwWT0=\",\r\n      meetingNumber: \"\",\r\n      passWord: \"\",\r\n      userName: \"Michael Vega\",\r\n      userEmail: \"\",\r\n      registrantToken: \"\",\r\n      userId: null,\r\n      isHost: false,\r\n      isMuted: false,\r\n      isVideo: false,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"getMic\", \"getCam\", \"getLeave\", \"getIsHost\"]),\r\n  },\r\n  created() {\r\n    try {\r\n      const url = remote.app.url[0]\r\n      const params = url.split(\"?\")\r\n      if (params.length > 0) {\r\n        this.idMeet = params[1]\r\n        const institucion = params[2]\r\n        this.signature = params[3]\r\n        this.userName = params[4]\r\n        console.log(this.idMeet, institucion, this.signature)\r\n        this.ZoomMtg.setZoomJSLib(\"https://source.zoom.us/2.0.1/lib\", \"/av\")\r\n        this.ZoomMtg.preLoadWasm()\r\n        this.ZoomMtg.prepareWebSDK()\r\n        //     // loads language files, also passes any error messages to the ui\r\n        this.ZoomMtg.i18n.load(\"es-ES\")\r\n        this.ZoomMtg.i18n.reload(\"es-ES\")\r\n      } else {\r\n        alert(\"No existen parámetros de conexión\")\r\n        window.close()\r\n      }\r\n    } catch (err) {\r\n      window.close()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.ZoomMtg.inMeetingServiceListener(\"onUserJoin\", (data) => {\r\n      console.log(\"inMeetingServiceListener onUserJoin\", data)\r\n    })\r\n    this.ZoomMtg.inMeetingServiceListener(\"onActiveVideoUserChanged\", (data) => {\r\n      console.log(\"inMeetingServiceListener onActiveVideoUserChanged\", data)\r\n    })\r\n  },\r\n  methods: {\r\n    loadControls() {\r\n      let route = this.$router.resolve({ path: `/controls?idMeet=${this.idMeet}&userId=${this.userId}&isHost=${this.isHost}` })\r\n      const intervalo = setInterval(() => {\r\n        const mic = JSON.parse(localStorage.getItem(\"mic\"))\r\n        const cam = JSON.parse(localStorage.getItem(\"cam\"))\r\n        const isLeave = JSON.parse(localStorage.getItem(\"isLeave\"))\r\n        const isHost = JSON.parse(localStorage.getItem(\"isHost\"))\r\n        console.log(mic, cam, isLeave, isHost)\r\n        this.micOnMeeting(mic)\r\n        this.camOnMeeting(cam)\r\n        if (isLeave && isHost) {\r\n          this.endMeeting()\r\n          clearInterval(intervalo)\r\n        } else if (isLeave && !isHost) {\r\n          this.leaveMeeting()\r\n          clearInterval(intervalo)\r\n        }\r\n      }, 2000)\r\n      // let route = this.$router.resolve('/link/to/page'); // This also works.\r\n      // window.open(route.href, \"_blank\", \"height=760,width=300,top=10,left=990,directories=no,titlebar=no,status=no,toolbar=no,menubar=no,navigationbar=no,location=no\")\r\n      window.open(route.href, \"_blank\", \"height=760,width=350,top=10,left=990,navigationbar=no,location=no\")\r\n    },\r\n    startMeeting() {\r\n      console.log(this.meetingNumber, this.userName, this.signature, this.apiKey, this.userEmail, this.passWord)\r\n      document.getElementById(\"zmmtg-root\").style.display = \"block\"\r\n      this.ZoomMtg.init({\r\n        leaveUrl: this.leaveUrl,\r\n        meetingInfo: [\"topic\", \"host\", \"enctype\"],\r\n        success: (success) => {\r\n          console.log(\"L65\", success)\r\n          const btnJoin = document.getElementsByClassName(\"joinWindowBtn\")[0]\r\n          const meetTitle = document.getElementsByClassName(\"meeting-title\")[0]\r\n          const btnCancel = document.createElement(\"button\")\r\n          btnCancel.setAttribute(\"class\", \"btn btn btn-danger btn-block btn-lg\")\r\n          btnCancel.textContent = \"Cancelar\"\r\n          btnCancel.addEventListener(\"click\", () => {\r\n            this.closeWindow()\r\n          })\r\n          btnJoin.parentNode.appendChild(btnCancel)\r\n          btnJoin.textContent = \"Ingresar a la reunión\"\r\n          meetTitle.textContent = \"Colegium - Zoom\"\r\n          const configStorageZoom = localStorage.getItem(btoa(\"easy-local-storage\"))\r\n          console.log(configStorageZoom)\r\n          this.ZoomMtg.join({\r\n            meetingNumber: this.meetingNumber,\r\n            userName: this.userName,\r\n            signature: this.signature,\r\n            apiKey: this.apiKey,\r\n            userEmail: this.userEmail,\r\n            passWord: this.passWord,\r\n            success: (success) => {\r\n              document.getElementById(\"wc-footer\").style.display = \"none\"\r\n              console.log(\"L75\", success)\r\n              this.getCurrentUser()\r\n            },\r\n            error: (error) => {\r\n              console.log(error)\r\n            },\r\n          })\r\n        },\r\n        error: (error) => {\r\n          console.log(error)\r\n        },\r\n      })\r\n    },\r\n    closeWindow() {\r\n      window.close()\r\n    },\r\n    async loadMeeting() {\r\n      const meetRef = await functionsFirebase.prototype.getOneDocWithCollection(\"Meetings\", this.idMeet)\r\n      const meetingData = meetRef.data()\r\n      console.log(meetingData)\r\n      this.meetingNumber = meetingData.idZoom\r\n      this.passWord = meetingData.password\r\n      this.startMeeting()\r\n    },\r\n    getCurrentUser() {\r\n      this.ZoomMtg.getCurrentUser({\r\n        success: (success) => {\r\n          console.log(success)\r\n          const user = success.result.currentUser\r\n          this.userId = user.userId\r\n          this.isHost = user.isHost\r\n          this.isMuted = user.muted\r\n          localStorage.setItem(\"isHost\", this.isHost)\r\n          this.loadControls()\r\n        },\r\n        error: (error) => {\r\n          console.log(error)\r\n        },\r\n      })\r\n    },\r\n    cleanStorage() {\r\n      localStorage.removeItem(\"mic\")\r\n      localStorage.removeItem(\"cam\")\r\n      localStorage.removeItem(\"isLeave\")\r\n      localStorage.removeItem(\"isHost\")\r\n    },\r\n    endMeeting() {\r\n      this.cleanStorage()\r\n      this.ZoomMtg.endMeeting({\r\n        error: (error) => {\r\n          console.log(error, \"Error en EndMeeting, usando LeaveMeeting!\")\r\n        },\r\n        success: (res) => {\r\n          console.log(res, \"Saliendo con EndMeeting...\")\r\n          this.closeWindow()\r\n        },\r\n      })\r\n    },\r\n    leaveMeeting() {\r\n      this.cleanStorage()\r\n      this.ZoomMtg.leaveMeeting({\r\n        error: (error) => {\r\n          console.log(error, \"Error en LeaveMeeting\")\r\n        },\r\n        success: (res) => {\r\n          console.log(res, \"Saliendo con LeaveMeeting...\")\r\n          this.closeWindow()\r\n        },\r\n      })\r\n    },\r\n    micOnMeeting(param) {\r\n      this.ZoomMtg.getCurrentUser({\r\n        success: (success) => {\r\n          const user = success.result.currentUser\r\n          this.userId = user.userId\r\n          this.isHost = user.isHost\r\n          this.isMuted = user.muted\r\n          localStorage.setItem(\"isHost\", this.isHost)\r\n\r\n          if (this.isMuted) {\r\n            console.log(\"muted - mic\", this.isMuted, param)\r\n            if (param) {\r\n              this.ZoomMtg.mute({\r\n                userId: this.userId,\r\n                mute: false,\r\n                error: (err) => {\r\n                  console.log(err)\r\n                },\r\n                success: (success) => {\r\n                  console.log(success)\r\n                  localStorage.setItem(\"mic\", false)\r\n                },\r\n              })\r\n            }\r\n          } else {\r\n            console.log(\"muted - mic\", this.isMuted, param)\r\n            if (param) {\r\n              this.ZoomMtg.mute({\r\n                userId: this.userId,\r\n                mute: true,\r\n                error: (err) => {\r\n                  console.log(err)\r\n                },\r\n                success: (success) => {\r\n                  console.log(success)\r\n                  localStorage.setItem(\"mic\", false)\r\n                },\r\n              })\r\n            }\r\n          }\r\n        },\r\n        error: (error) => {\r\n          console.log(error)\r\n        },\r\n      })\r\n      // if (param) document.getElementsByClassName(\"zm-btn join-audio-container__btn\")[0].click()\r\n    },\r\n    camOnMeeting(param) {\r\n      const isVideo = document.getElementsByClassName(\"video-avatar__avatar\")[0].style.background\r\n      if (isVideo == \"\") {\r\n        if (param) {\r\n          document.getElementsByClassName(\"zm-btn send-video-container__btn\")[0].click()\r\n          localStorage.setItem(\"cam\", \"false\")\r\n        }\r\n      } else {\r\n        if (param) {\r\n          document.getElementsByClassName(\"zm-btn send-video-container__btn\")[0].click()\r\n          localStorage.setItem(\"cam\", \"false\")\r\n        }\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n#menuMeet {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n#btnGroup button {\r\n  margin-right: 5px;\r\n  margin-left: 5px;\r\n}\r\n\r\n.wc-footer {\r\n  display: none !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meeting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meeting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Meeting.vue?vue&type=template&id=0c5066f4&scoped=true&\"\nimport script from \"./Meeting.vue?vue&type=script&lang=js&\"\nexport * from \"./Meeting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Meeting.vue?vue&type=style&index=0&id=0c5066f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c5066f4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}